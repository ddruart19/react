(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[70],{8166:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/edit/[taskid]",function(){return t(8617)}])},8617:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return g}});var r=t(5893),a=t(1163);t(7294);var s=t(1799),i=t(9396),u=t(9534),o=t(7014),d=t(2580),c=t(4231),l=t(8767),f=t(2491),h=t(3639),m={color:"red"},x=function(n){var e=n.field,t=n.form,a=(0,u.Z)(n,["field","form"]);return(0,r.jsx)(o.gx,(0,i.Z)((0,s.Z)({},e,a),{onChange:t.handleChange,onBlur:t.handleBlur,rows:6}))},j=function(n){var e=n.field,t=n.form,a=(0,u.Z)(n,["field","form"]);return(0,r.jsx)(o.oi,(0,i.Z)((0,s.Z)({},e,a),{onChange:t.handleChange,onBlur:t.handleBlur}))},k=c.Ry().shape({taskName:c.Z_().min(2,"Too short !").required("Task name required")}),p=function(n){var e=n.taskId,t=(0,a.useRouter)(),s=(0,l.useQueryClient)(),i=(0,l.useQuery)(["fetchTaskById",e],function(){return(0,f.u_)(e)}),u=(0,l.useMutation)(f.xJ,{onSuccess:function(){s.invalidateQueries("todoList")}}),c=function(n){u.mutate({name:n.taskName,completed:i.data[0].completed,date:new Date(n.taskDate),id:Number(e)})};return"loading"===i.status?(0,r.jsx)("span",{children:"Loading..."}):"error"===i.status?(0,r.jsx)("span",{children:"Error: "}):e&&i.data?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(d.J9,{initialValues:{taskName:i.data[0].name,taskDate:(0,h.p6)(new Date(i.data[0].date))},validationSchema:k,onSubmit:function(n,e){c(n),e.setSubmitting(!1),t.push("/list")},children:(0,r.jsxs)(d.l0,{className:"flex flex-col gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{children:["Task :",(0,r.jsx)(d.gN,{name:"taskName",placeholder:"Your task",component:x})]}),(0,r.jsx)(d.Bc,{name:"taskName",children:function(n){return(0,r.jsx)("span",{style:m,children:n})}})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{children:["Date :",(0,r.jsx)(d.gN,{name:"taskDate",type:"date",component:j})]}),(0,r.jsx)(d.Bc,{name:"taskDate",children:function(n){return(0,r.jsx)("span",{style:m,children:n})}})]}),(0,r.jsx)(o.zx,{type:"submit",children:"Edit"})]})})}):(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("h2",{children:"No task found"})})},g=function(){var n=(0,a.useRouter)().query.taskid;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(p,{taskId:String(n)})})}},3639:function(n,e,t){"use strict";t.d(e,{LM:function(){return u},p6:function(){return o},zO:function(){return d}});var r=t(381),a=t.n(r),s=t(8767),i=t(2491),u=function(n){return a()(n).format("DD MMMM YY")},o=function(n){return a()(n).format("yy-MM-DD")},d=function(){return(0,s.useQuery)("todoList",i.Jv)}}},function(n){n.O(0,[885,774,888,179],function(){return n(n.s=8166)}),_N_E=n.O()}]);