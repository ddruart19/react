(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[70],{8166:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/edit/[taskid]",function(){return t(8617)}])},8617:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return p}});var a=t(5893),r=t(1163);t(7294);var s=t(1799),i=t(9396),u=t(9534),o=t(7014),d=t(2580),l=t(4231),c=t(8767),f=t(2491),h=t(3639),m={color:"red"},x=function(e){var n=e.field,t=e.form,r=(0,u.Z)(e,["field","form"]);return(0,a.jsx)(o.gx,(0,i.Z)((0,s.Z)({},n,r),{onChange:t.handleChange,onBlur:t.handleBlur,rows:6}))},k=function(e){var n=e.field,t=e.form,r=(0,u.Z)(e,["field","form"]);return(0,a.jsx)(o.oi,(0,i.Z)((0,s.Z)({},n,r),{onChange:t.handleChange,onBlur:t.handleBlur}))},j=l.Ry().shape({taskName:l.Z_().min(2,"Too short !").required("Task name required")}),g=function(e){var n=e.taskId,t=(0,r.useRouter)(),s=(0,c.useQueryClient)(),i=(0,c.useQuery)(["fetchTaskById",n],function(){return(0,f.u_)(n)}),u=(0,c.useMutation)(f.xJ,{onSuccess:function(){s.invalidateQueries("todoList")}}),l=function(e){u.mutate({name:e.taskName,completed:i.data[0].completed,date:new Date(e.taskDate),id:Number(n)})};return"loading"===i.status?(0,a.jsx)("span",{children:"Loading..."}):"error"===i.status?(0,a.jsx)("span",{children:"Error: "}):n&&i.data?(0,a.jsxs)(a.Fragment,{children:[console.log("render",i.data),(0,a.jsxs)(o.Zb,{style:{margin:"0 auto"},className:"w-full md:w-4/5",children:[(0,a.jsx)("h5",{className:"text-2xl font-bold tracking-tight text-gray-900 dark:text-white",children:"Task edition"}),(0,a.jsx)(d.J9,{initialValues:{taskName:i.data[0].name,taskDate:(0,h.p6)(new Date(i.data[0].date))},validationSchema:j,onSubmit:function(e,n){l(e),n.setSubmitting(!1),t.push("/list")},enableReinitialize:!0,children:(0,a.jsxs)(d.l0,{className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{children:["Task :",(0,a.jsx)(d.gN,{name:"taskName",placeholder:"Your task",component:x})]}),(0,a.jsx)(d.Bc,{name:"taskName",children:function(e){return(0,a.jsx)("span",{style:m,children:e})}})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{children:["Date :",(0,a.jsx)(d.gN,{name:"taskDate",type:"date",component:k})]}),(0,a.jsx)(d.Bc,{name:"taskDate",children:function(e){return(0,a.jsx)("span",{style:m,children:e})}})]}),(0,a.jsx)(o.zx,{type:"submit",children:"Edit"})]})})]})]}):(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("h2",{children:"No task found"})})},p=function(){var e=(0,r.useRouter)().query.taskid;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(g,{taskId:String(e)})})}},3639:function(e,n,t){"use strict";t.d(n,{LM:function(){return u},p6:function(){return o},zO:function(){return d}});var a=t(381),r=t.n(a),s=t(8767),i=t(2491),u=function(e){return r()(e).format("DD MMMM YY")},o=function(e){return r()(e).format("yy-MM-DD")},d=function(){return(0,s.useQuery)("todoList",i.Jv)}}},function(e){e.O(0,[885,774,888,179],function(){return e(e.s=8166)}),_N_E=e.O()}]);